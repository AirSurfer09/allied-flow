{"code":"var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,\"name\",{value,configurable:true});import*as trpcExpress from\"@trpc/server/adapters/express\";import cors from\"cors\";import express from\"express\";import{appRouter,createTRPCContext}from\"@repo/api\";import{env}from\"./config/env.js\";import{extractClaimsFromHeader}from\"./services/auth/auth.js\";const createContext=__name(async({req,res})=>{let claims=null;try{const payload=await extractClaimsFromHeader(req.headers);claims=payload}catch(error){console.error(\">>> Error extracting claims\",error)}return createTRPCContext({headers:req.headers,claims})},\"createContext\");async function start(){const app=express();app.use(express.urlencoded({extended:true}));app.use(express.json());app.use(cors());app.use(\"/trpc\",trpcExpress.createExpressMiddleware({router:appRouter,createContext}));console.log(\"Starting server\");app.listen(env.PORT,()=>{console.log(`Server is running on http://localhost:${env.PORT}`)})}__name(start,\"start\");function shutdown(){console.log(\"Shutting down server\")}__name(shutdown,\"shutdown\");start();process.on(\"SIGINT\",shutdown);process.on(\"SIGTERM\",shutdown);process.on(\"unhandledRejection\",err=>{console.error(err);process.exit(1)});process.on(\"uncaughtException\",err=>{console.error(err);process.exit(1)});\n","warnings":[],"map":{"version":3,"mappings":"kHAAA,UAAY,gBAAiB,gCAC7B,OAAO,SAAU,OACjB,OAAO,YAAa,UAEpB,OAAS,UAAW,sBAAyB,YAE7C,OAAS,QAAW,kBACpB,OAAS,4BAA+B,0BAExC,MAAM,cAAgB,aAAO,CAC3B,IACA,GACF,IAA+C,CAC7C,IAAI,OAAS,KACb,GAAI,CACF,MAAM,QAAU,MAAM,wBAAwB,IAAI,OAAO,EACzD,OAAS,OACX,OAAS,MAAO,CAEd,QAAQ,MAAM,8BAA+B,KAAK,CACpD,CAEA,OAAO,kBAAkB,CACvB,QAAS,IAAI,QACb,MACF,CAAC,CACH,EAjBsB,iBAmBtB,eAAe,OAAQ,CACrB,MAAM,IAAM,QAAQ,EAEpB,IAAI,IAAI,QAAQ,WAAW,CAAE,SAAU,IAAK,CAAC,CAAC,EAC9C,IAAI,IAAI,QAAQ,KAAK,CAAC,EACtB,IAAI,IAAI,KAAK,CAAC,EAEd,IAAI,IACF,QACA,YAAY,wBAAwB,CAClC,OAAQ,UACR,aACF,CAAC,CACH,EAEA,QAAQ,IAAI,iBAAiB,EAE7B,IAAI,OAAO,IAAI,KAAM,IAAM,CACzB,QAAQ,IAAI,yCAAyC,IAAI,IAAI,EAAE,CACjE,CAAC,CACH,CApBe,sBAsBf,SAAS,UAAW,CAClB,QAAQ,IAAI,sBAAsB,CACpC,CAFS,4BAIT,MAAM,EAEN,QAAQ,GAAG,SAAU,QAAQ,EAC7B,QAAQ,GAAG,UAAW,QAAQ,EAE9B,QAAQ,GAAG,qBAAuB,KAAQ,CACxC,QAAQ,MAAM,GAAG,EACjB,QAAQ,KAAK,CAAC,CAChB,CAAC,EAED,QAAQ,GAAG,oBAAsB,KAAQ,CACvC,QAAQ,MAAM,GAAG,EACjB,QAAQ,KAAK,CAAC,CAChB,CAAC","names":[],"ignoreList":[],"sources":["C:\\Mains\\Programming\\Typescript\\allied-flow\\apps\\server\\src\\index.ts"],"sourcesContent":[null]}}